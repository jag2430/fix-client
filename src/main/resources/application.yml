server:
  port: 8081

fix:
  config-file: quickfix-client.cfg

spring:
  # PostgreSQL Configuration
  datasource:
    url: jdbc:postgresql://localhost:5432/fixclient
    username: fixuser
    password: fixpassword
    driver-class-name: org.postgresql.Driver
    hikari:
      maximum-pool-size: 10
      minimum-idle: 5
      idle-timeout: 300000
      connection-timeout: 20000
      max-lifetime: 1200000

  jpa:
    hibernate:
      ddl-auto: update
    show-sql: false
    properties:
      hibernate:
        dialect: org.hibernate.dialect.PostgreSQLDialect
        format_sql: true
        jdbc:
          batch_size: 50
        order_inserts: true
        order_updates: true

  # Redis Configuration
  data:
    redis:
      host: ${REDIS_HOST:localhost}
      port: ${REDIS_PORT:6379}
      password: ${REDIS_PASSWORD:}
      timeout: 2000ms
      lettuce:
        pool:
          max-active: 8
          max-idle: 8
          min-idle: 2
          max-wait: -1ms

# Redis pub/sub channels
redis:
  channels:
    positions: positions:updates
    executions: executions:updates
    orders: orders:updates
    marketdata: marketdata:updates
  cache:
    positions-ttl: 3600
    orders-ttl: 86400

# Market Data Configuration
# Options: none, finnhub
market-data:
  provider: ${MARKET_DATA_PROVIDER:finnhub}

  # Finnhub Configuration (Free tier: 60 calls/min REST, free WebSocket)
  # Get your FREE API key at: https://finnhub.io/register
  finnhub:
    api-key: d58rhg9r01qvj8iiggc0d58rhg9r01qvj8iiggcg
    # Use WebSocket for real-time trades (recommended)
    use-websocket: ${FINNHUB_USE_WEBSOCKET:true}
    # REST API polling interval (only used if WebSocket disabled)
    refresh-interval-ms: ${FINNHUB_REFRESH_INTERVAL:5000}
    # How long to cache quotes in Redis (in seconds)
    cache-ttl-seconds: ${FINNHUB_CACHE_TTL:300}


logging:
  level:
    quickfix: INFO
    com.example: DEBUG
    org.springframework.data.redis: DEBUG
    org.hibernate.SQL: DEBUG

---
# Development profile
spring:
  config:
    activate:
      on-profile: dev
  jpa:
    show-sql: true

market-data:
  finnhub:
    refresh-interval-ms: 10000  # Slower refresh in dev

---
# Production profile
spring:
  config:
    activate:
      on-profile: prod
  jpa:
    hibernate:
      ddl-auto: validate
    show-sql: false

market-data:
  finnhub:
    refresh-interval-ms: 5000

logging:
  level:
    quickfix: WARN
    com.example: INFO
    org.hibernate.SQL: WARN